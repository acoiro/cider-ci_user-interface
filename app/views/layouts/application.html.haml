-#  Copyright (C) 2013, 2014 Dr. Thomas Schank  (DrTom@schank.ch, Thomas.Schank@algocon.ch)
-#  Licensed under the terms of the GNU Affero General Public License v3.
-#  See the LICENSE.txt file provided with this software.

!!!
%html
  %head
    %title Cider-CI
    = stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true
    = javascript_include_tag "application", "data-turbolinks-track" => true
    - if Rails.env == 'development'
      = javascript_include_tag "try", "data-turbolinks-track" => true
    = csrf_meta_tags
    - unless user?
      :sass
        .for-signed-in-user
          display: none !important
    - unless admin?
      :sass
        .for-admin
          display: none !important
  %body{data: {user: user?, admin: admin?}}
    .container

      = cache [current_user,admin?] do 
        = render partial: "navbar/navbar" 

      #messages
        - if flash[:success]
          .alert.alert-success.alert-dismissable
            %button.close{type:"button", 'data-dismiss'=>'alert'} &#215
            = flash[:success]
        - if flash[:notice]
          .alert.alert-info.alert-dismissable
            %button.close{type:"button", 'data-dismiss'=>"alert"} &#215
            = flash[:notice]
        - if flash[:error] and (flash[:error].is_a? Array) or flash[:error] = [flash[:error]]
          - flash[:error].each do |error|
            - if error
              .alert.alert-danger.alert-dismissable
                %button.close{type:"button", 'data-dismiss'=>"alert"} &#215
                = error
        - if flash[:warning] and (flash[:warning].is_a? Array) or flash[:warning] = [flash[:warning]]
          - flash[:warning].each do |error|
            - if error
              .alert.alert-warning.alert-dismissable
                %button.close{type:"button", 'data-dismiss'=>"alert"} &#215
                = error



      %div#application{data: {env: Rails.env}}

        = yield 


